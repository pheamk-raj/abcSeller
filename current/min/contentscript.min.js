function rssa(){attachDebugger(),getStorageValue("extSetting",function(e){prsa(e)})}function prsa(e){attachDebugger(),isEmpty(e)&&(e=dasaar),settingsRead=e,efras(e)}function efras(e){mkrsaas(),arrask()}function mkrsaas(){$(document).bind("keydown","ctrl+i",hkakdj),$(document).bind("keydown","ctrl+b",haamfk),$(document).bind("keydown","ctrl+m",launchCamel)}function launchCamel(){if(null!=settingsRead&&1==settingsRead.launchCamel){var e="http://camelcamelcamel.com/search?sq="+asin;window.open(e,"_blank")}}function hkakdj(){attachDebugger(),null!=settingsRead&&1==settingsRead.enableKeepa&&(log("dialog element count"+$("#dialog-message").length),0==isKeepaDialogOpen?($dialog=$('<div width="500px" height="200px" id="dialog" title="keepa price history"><img alt="loading..." width="500px" height="200px" src="https://dyn.keepa.com/v2/pricehistory.png?asin='+asin+'&domain=com"/></div>'),$dialog.dialog({modal:!0,width:"500px",height:"200px"}),isKeepaDialogOpen=!0):($dialog.dialog("close"),isKeepaDialogOpen=!1))}function haamfk(){attachDebugger(),null!=settingsRead&&1==settingsRead.togglePageView&&($extrasOnPage=$(essjtr.join(", ")),extraOnPageIsVisible?$extrasOnPage.hide():$extrasOnPage.show(),extraOnPageIsVisible=!extraOnPageIsVisible)}function arrask(){var e=!0,t=setInterval(function(){1==e&&(e=!1,log("brandByline_feature_div count:"+$("#brandByline_feature_div").length),log("table.prodDetTable count:"+$("table.prodDetTable").length),log("SalesRank count:"+$("#SalesRank").length)),figureProductAttributes(),$("table.moved-up-tabel").remove(),1==settingsRead.pageRankMove&&null!=$rankPositionElement&&($rankPositionElement.before($htmlProdRank),log("selected ele2"+$rankPositionElement.length))},1e3);window.rankchkTimer=t}function removeRankTimer(){null!=window.rankchkTimer&&(clearInterval(window.rankchkTimer),window.rankchkTimer=null)}function figureProductAttributes(){if(attachDebugger(),$("#brandByline_feature_div").length>0?$rankPositionElement=$("#brandByline_feature_div"):$("#booksTitle").length>0?$rankPositionElement=$("#booksTitle"):$("#title_feature_div").length>0?$rankPositionElement=$("#title_feature_div:first"):$("h1.parseasinTitle").length>0?$rankPositionElement=$("#product-title-divider"):log("could not figure where to put rank"),$("#SalesRank").length>0?$htmlProdRank=$("<table class='moved-up-tabel' style='border:1px solid black;padding:10px;'/>").append($("#SalesRank").html()):$("table.prodDetTable tr:contains('Sellers Rank')").length>0?$htmlProdRank=$("<table class='moved-up-tabel' style='border:1px solid black;'/>").append($("table.prodDetTable tr:contains('Sellers Rank')").html()):(log("could not figure rank"),$htmlProdRank=$("<table class='moved-up-tabel' style='border:1px solid black;'/>").append($("<tr><td><span style='color:#ddd;'>(known sales rank)</span></td></tr>").html())),$("#SalesRank").closest("ul").find("li:contains('ASIN:')").length>0){var e=$("#SalesRank").closest("ul").find("li:contains('ASIN:')").text().replace("ASIN: ","");asin=e.trim()}else $("table.prodDetTable tr:contains('ASIN')").length>0?(asin=$("table.prodDetTable tr:contains('ASIN') td:last").text().trim(),log("asin -"+asin)):$("tr.average_customer_reviews").closest("table").find("tr:first").find("td:contains('ASIN')").length>0?asin=$("tr.average_customer_reviews").closest("table").find("tr:first").find("td:last").text().trim():$("#productDetailsTable li:contains('ISBN-10')").length>0?(log("ISBN-10 found"),asin=$("#productDetailsTable li:contains('ISBN-10')").text().replace("ISBN-10:","").trim()):$("#descriptionAndDetails li:contains('ASIN')").length>0?asin=$("#descriptionAndDetails li:contains('ASIN')").text().replace("ASIN:","").trim():$("#product-description_feature_div li:contains('ASIN')").length>0?asin=$("#product-description_feature_div li:contains('ASIN')").text().replace("ASIN:","").trim():$("#detail-bullets li:contains('ASIN')").length>0?asin=$("#detail-bullets li:contains('ASIN')").text().replace("ASIN:","").trim():log("not sure how to get asin");log("asin:"+asin)}function mdww(){1==isDebug&&($("body").append('<div id="logWindow" style="position:absolute;top:20px;right:20px;width:300px;height:400px;    z-index: 999;    background-color: #FFF;    overflow-y: scroll;"/>'),window.logWindow=$("#logWindow"))}function log(e){1==isDebug&&(window.logWindow.append(e),window.logWindow.append("<br/>"))}function bskskj(){bindStorageChangeListener("extSetting",function(e,t){attachDebugger(),settingsRead=e})}var dasaar={pageRankMove:!0,togglePageView:!0,enableKeepa:!0,launchCamel:!0},settingsRead;attachDebugger(),mdww(),rssa(),bskskj();var isKeepaDialogOpen=!1,$dialog=null,essjtr=["#rightCol","#buybox_feature_div","#purchase-similarities_feature_div","#sponsored-products-dp_feature_div","#conditional-probability_feature_div","#rhf","#navFooter","#dp-ads-middle_feature_div","#aplus-product-description_feature_div","#giveaway_feature_div","#part-finder-garage-widget_feature_div","header","#customer_discussions_lazy_load_div","#session-sims-feature","#dpx-giveaway_feature_div","#giveaway_feature_div","#AUI_bucket celwidget","#store-disclaimer_feature_div","#hqpWrapper","#hqp","#buyBoxContent","#buyboxDivId","#promotions_feature_div"],$extrasOnPage=null,extraOnPageIsVisible=!0,asin=null,$htmlProdRank=null,$rankPositionElement=null;chrome.storage.sync.get(["extSetting","keywords"],function(e){var t=e.extSetting,a=e.keywords;console.debug("extSetting bbb:",t),console.debug("keywords bbb:",a)});